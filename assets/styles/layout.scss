// layout made with help from:
// https://stackoverflow.com/questions/35559104/flexbox-ordering-splitting-a-column



.layout {
	background-color: if($debug, gray, unset);
	display: flex;
	flex-flow: column nowrap;
	min-height: 100%;

	& > .page {
		background-color: if($debug, lightgray, unset);
		flex-grow: 1;
		display: flex;
		flex-flow: column nowrap;
		min-height: inherit;

		@include ifLargerThan(small) {
			flex-flow: row wrap;
		}

		& > aside {

			@include ifLargerThan(small) {
				width: map-get($sidebar-width, small);
			}

			@include ifLargerThan(medium) {
				width: map-get($sidebar-width, medium);
			}

			&.top {
				background-color: if($debug, yellow, unset);

				& > .bottom {
					display: none;

					@include ifLargerThan(small) {
						display: block;
					}
				}
			}

			&.bottom {
				background-color: if($debug, lightyellow, unset);

				@include ifLargerThan(small) {
					display: none;
				}
			}
		}

		& > main {
			background-color: if($debug, aqua, unset);

			@include ifLargerThan(small) {
				flex-basis: calc(100% - #{map-get($sidebar-width, small)});
			}

			@include ifLargerThan(medium) {
				flex-basis: calc(100% - #{map-get($sidebar-width, medium)});
			}
		}
	}
}



.layout {
	%centered-if-small {
		text-align: center;

		@include ifLargerThan(small) {
			text-align: inherit;
		}
	}

	%padding-for-sidebar {
		@include ifLargerThan(small) {
			padding-left: map-get($sidebar-width, small);
		}

		@include ifLargerThan(medium) {
			padding-left: map-get($sidebar-width, medium);
		}
	}

	& > header {
		@extend %centered-if-small;
		@extend %padding-for-sidebar;
	}

	& > footer {
		@extend %centered-if-small;
		@extend %padding-for-sidebar;
	}

	& > .page {
		place-content: flex-start;
		padding: $spacing-dense 0;

		%page-part {
			padding: 0 $spacing-dense;
		}

		& > aside {
			@extend %page-part;
			text-align: center;

			&.top {
				display: none;

				@include ifLargerThan(small) {
					display: block;
				}

				&.is-active {
					display: block;
				}
			}

			&.bottom {
				margin-top: $spacing-dense;
			}

			@include ifLargerThan(small) {
				text-align: right;
			}

			& > .widget,
			& > .bottom > .widget {
				@include flare(after, 3rem, right);

				header {
					margin-bottom: $spacing-dense;
				}
			}
		}

		& > main {
			@extend %page-part;

			& header {
				@include flare(after, 50%, left);
			}
		}
	}
}
