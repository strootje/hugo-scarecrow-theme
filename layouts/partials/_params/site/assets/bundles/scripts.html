{{- $files := (slice) -}}
{{- $files = $files | append "lambda" -}}
{{- $files = $files | append "popup" -}}
{{- $files = $files | append "modules/search" -}}
{{- $files = $files | append "modules/offline" -}}

{{- $sources := (slice) -}}
{{- range $files -}}
	{{- $fullpath := printf "scripts/%s.js" . -}}
	{{- $sources = $sources | append (resources.Get $fullpath | resources.ExecuteAsTemplate $fullpath $) -}}
{{- end -}}

{{- $bundle := $sources | resources.Concat "bundle.js" | minify | fingerprint "sha512" -}}
{{- return (dict "Permalink" $bundle.Permalink "RelPermalink" $bundle.RelPermalink "Integrity" $bundle.Data.Integrity) -}}
